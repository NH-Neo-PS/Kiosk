<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schulkiosk Management System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <h1>ğŸª Schulkiosk Login</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label>Benutzername</label>
                    <input type="text" id="loginUsername" placeholder="dein benutzername" required>
                </div>
                <div class="form-group">
                    <label>Passwort</label>
                    <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                </div>
                <button type="submit" class="btn btn-primary">Anmelden</button>
                <div id="loginError" class="error-message"></div>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" style="display: none;">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>ğŸª Kiosk</h1>
            </div>
            
            <div class="nav-links">
                <a href="#" class="nav-link active" data-view="dashboard">
                    <span class="icon">ğŸ“Š</span>
                    <span>Ãœbersicht</span>
                </a>
                <a href="#" class="nav-link" data-view="kasse" id="navKasse">
                    <span class="icon">ğŸ’°</span>
                    <span>Kasse</span>
                </a>
                <a href="#" class="nav-link" data-view="produkte" id="navProdukte">
                    <span class="icon">ğŸ“¦</span>
                    <span>Produkte</span>
                </a>
                <a href="#" class="nav-link" data-view="mitarbeiter" id="navMitarbeiter">
                    <span class="icon">ğŸ‘¥</span>
                    <span>Mitarbeiter</span>
                </a>
                <a href="#" class="nav-link" data-view="benutzerverwaltung" id="navBenutzerverwaltung">
                    <span class="icon">ğŸ‘¤</span>
                    <span>Benutzer</span>
                </a>
                <a href="#" class="nav-link" data-view="dienstplan" id="navDienstplan">
                    <span class="icon">ğŸ“…</span>
                    <span>Dienstplan</span>
                </a>
                <a href="#" class="nav-link" data-view="protokoll">
                    <span class="icon">ğŸ“‹</span>
                    <span>Protokoll</span>
                </a>
                <a href="#" class="nav-link" data-view="datenbank" id="navDatenbank">
                    <span class="icon">ğŸ—ƒï¸</span>
                    <span>Datenbank</span>
                </a>
                <a href="#" class="nav-link" data-view="einstellungen">
                    <span class="icon">âš™ï¸</span>
                    <span>Einstellungen</span>
                </a>
            </div>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">MM</div>
                    <div>
                        <p class="user-name" id="userName">Max Mustermann</p>
                        <p class="user-role" id="userRole">Admin</p>
                    </div>
                </div>
                
                <button class="btn btn-danger" id="logoutBtn">Abmelden</button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view active">
                <h2>Meine Ãœbersicht</h2>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span>VerkÃ¤ufe Heute</span>
                            <span class="stat-icon">ğŸ›’</span>
                        </div>
                        <p class="stat-value" id="statSales">0</p>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <span>Umsatz Heute</span>
                            <span class="stat-icon">ğŸ’°</span>
                        </div>
                        <p class="stat-value" id="statRevenue">0â‚¬</p>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <span>Gesamtumsatz</span>
                            <span class="stat-icon">ğŸ¦</span>
                        </div>
                        <p class="stat-value" id="statTotalRevenue">0â‚¬</p>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span>Aktive Mitarbeiter</span>
                            <span class="stat-icon">ğŸ‘¥</span>
                        </div>
                        <p class="stat-value" id="statEmployees">0</p>
                    </div>
                </div>

                <div class="section">
                    <h3>ğŸ“‹ Letzte 10 VerkÃ¤ufe</h3>
                    <div id="recentLogs" class="logs-container"></div>
                </div>

                <div class="section">
                    <h3>ğŸ“Š Tagesstatistik</h3>
                    <div id="dailyStats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;"></div>
                </div>
            </div>

            <!-- Kasse View -->
            <div id="kasseView" class="view">
                <h2>ğŸ’° Kasse</h2>
                
                <div class="kasse-layout">
                    <div>
                        <div class="products-grid" id="productsGrid"></div>
                    </div>
                    
                    <div class="cart-section">
                        <h3>ğŸ›’ Warenkorb</h3>
                        <div id="cartItems" class="cart-items"></div>
                        <div class="cart-total">
                            <span>Gesamt:</span>
                            <span id="cartTotal">0.00â‚¬</span>
                        </div>
                        
                        <!-- Zahlungsbereich -->
                        <div id="paymentSection" style="display: none; background: var(--bg-tertiary); padding: 16px; border-radius: 8px; margin-bottom: 16px;">
                            <h4 style="margin-bottom: 12px;">ğŸ’³ Zahlung</h4>
                            <div style="margin-bottom: 12px;">
                                <label style="display: block; font-size: 12px; color: #9ca3af; margin-bottom: 4px;">Gesamt:</label>
                                <div style="font-size: 20px; font-weight: 700;" id="paymentTotal">0.00â‚¬</div>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <label style="display: block; font-size: 12px; color: #9ca3af; margin-bottom: 4px;">Kunde bezahlt (â‚¬):</label>
                                <input type="number" id="paymentInput" placeholder="0.00" step="0.01" style="width: 100%; padding: 12px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 6px; color: white; font-size: 16px;">
                            </div>
                            <div style="background: var(--bg-secondary); padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                                <div style="font-size: 12px; color: #9ca3af; margin-bottom: 4px;">Wechselgeld:</div>
                                <div style="font-size: 18px; font-weight: 700; color: var(--accent-green);" id="changeAmount">0.00â‚¬</div>
                            </div>
                            <button type="button" class="btn btn-success" id="confirmPaymentBtn" style="margin-bottom: 8px;">âœ“ Verkauf bestÃ¤tigen</button>
                            <button type="button" class="btn btn-danger" id="cancelPaymentBtn">âœ— Abbrechen</button>
                        </div>
                        
                        <button class="btn btn-success" id="completeSaleBtn">ğŸ’³ Verkauf abschlieÃŸen</button>
                    </div>
                </div>
            </div>

            <!-- Produkte View -->
            <div id="produkteView" class="view">
                <h2>Produktverwaltung</h2>
                
                <div class="section">
                    <h3>Neues Produkt hinzufÃ¼gen</h3>
                    <form id="addProductForm" class="product-form">
                        <input type="text" id="productName" placeholder="Produktname" required>
                        <input type="number" id="productPrice" placeholder="Preis (â‚¬)" step="0.01" required>
                        <input type="number" id="productStock" placeholder="Lagerbestand" required>
                        <input type="text" id="productCategory" placeholder="Kategorie" required>
                        <button type="submit" class="btn btn-primary">HinzufÃ¼gen</button>
                    </form>
                </div>

                <div class="section">
                    <h3>Alle Produkte</h3>
                    <div id="productsList" class="products-list"></div>
                </div>
            </div>

            <!-- Mitarbeiter View -->
            <div id="mitarbeiterView" class="view">
                <h2>Mitarbeiterverwaltung</h2>
                <div class="employees-list" id="employeesList"></div>
            </div>

            <!-- Benutzerverwaltung View -->
            <div id="benutzerverwaltungView" class="view">
                <h2>Benutzerverwaltung</h2>
                
                <div class="section">
                    <h3>Neuen Benutzer erstellen</h3>
                    <form id="addUserForm" class="product-form">
                        <input type="text" id="newName" placeholder="VollstÃ¤ndiger Name (z.B. Max Mueller)" required>
                        <input type="password" id="newPassword" placeholder="Passwort" required>
                        <select id="newUserRole" required>
                            <option value="mitschueler">MitschÃ¼ler</option>
                            <option value="it">IT</option>
                            <option value="admin">Admin</option>
                        </select>
                        <button type="submit" class="btn btn-primary">Erstellen</button>
                    </form>
                </div>

                <div class="section">
                    <h3>Alle Benutzer</h3>
                    <div id="usersList" class="users-list"></div>
                </div>
            </div>

            <!-- Dienstplan View -->
            <div id="dienstplanView" class="view">
                <h2>Dienstplan</h2>
                
                <div class="section" id="dienstplanFormSection">
                    <h3>WÃ¶chentlichen Dienstplan erstellen</h3>
                    <form id="dienstplanForm" class="product-form">
                        <select id="dienstplanDay" required>
                            <option value="">Tag auswÃ¤hlen</option>
                            <option value="Montag">Montag</option>
                            <option value="Dienstag">Dienstag</option>
                            <option value="Mittwoch">Mittwoch</option>
                            <option value="Donnerstag">Donnerstag</option>
                            <option value="Freitag">Freitag</option>
                            <option value="Samstag">Samstag</option>
                        </select>
                        <select id="dienstplanEmployee" required>
                            <option value="">Mitarbeiter auswÃ¤hlen</option>
                        </select>
                        <input type="time" id="dienstplanStart" required>
                        <input type="time" id="dienstplanEnd" required>
                        <button type="submit" class="btn btn-primary">HinzufÃ¼gen</button>
                    </form>
                </div>

                <div class="section">
                    <h3>ğŸ“… Dienstplan-Ãœbersicht</h3>
                    <div id="dienstplanList"></div>
                </div>
            </div>

            <!-- Protokoll View -->
            <div id="protokollView" class="view">
                <h2>Verkaufsprotokolle</h2>
                
                <div class="section">
                    <h3>ğŸ” Filter</h3>
                    <div class="filter-grid">
                        <div>
                            <label>Nach Typ</label>
                            <select id="filterType">
                                <option value="all">Alle</option>
                                <option value="Verkauf">Verkauf</option>
                                <option value="Aufstockung">Aufstockung</option>
                                <option value="RÃ¼ckgabe">RÃ¼ckgabe</option>
                            </select>
                        </div>
                        <div>
                            <label>Nach Datum</label>
                            <input type="date" id="filterDate">
                        </div>
                    </div>
                </div>
                
                <div id="salesLogs" class="logs-table"></div>
            </div>

            <!-- Datenbank View -->
            <div id="datenbankView" class="view">
                <h2>ğŸ“Š Datenbank Management</h2>
                
                <div class="db-view-section">
                    <h3>ğŸ—ƒï¸ Benutzer</h3>
                    <table class="db-table" id="dbUsersTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Username</th>
                                <th>Rolle</th>
                                <th>Erstellt</th>
                                <th>Status</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="dbUsersBody"></tbody>
                    </table>
                </div>
                
                <div class="db-view-section">
                    <h3>ğŸ“¦ Produkte</h3>
                    <table class="db-table" id="dbProductsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Preis</th>
                                <th>Lager</th>
                                <th>Kategorie</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="dbProductsBody"></tbody>
                    </table>
                </div>
                
                <div class="db-view-section">
                    <h3>ğŸ’° VerkÃ¤ufe</h3>
                    <table class="db-table" id="dbSalesTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Datum</th>
                                <th>Mitarbeiter</th>
                                <th>Gesamt</th>
                                <th>Produkte</th>
                                <th>Aktionen</th>
                            </tr>
                        </thead>
                        <tbody id="dbSalesBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Einstellungen View -->
            <div id="einstellungenView" class="view">
                <h2>âš™ï¸ Einstellungen</h2>
                
                <div class="section">
                    <h3>ğŸ” Passwort Ã¤ndern</h3>
                    <form id="changePasswordForm" class="product-form" style="grid-template-columns: 1fr;">
                        <input type="password" id="oldPassword" placeholder="Altes Passwort" required>
                        <input type="password" id="settingsNewPassword" placeholder="Neues Passwort" required>
                        <input type="password" id="confirmPassword" placeholder="Passwort wiederholen" required>
                        <button type="submit" class="btn btn-primary">Passwort Ã¤ndern</button>
                    </form>
                </div>
                
                <div class="section">
                    <h3>ğŸ¨ Design & Farben</h3>
                    <div style="display: grid; gap: 16px;">
                        <div>
                            <label>Farbschema:</label>
                            <select id="designSelect" style="width: 100%; padding: 12px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                                <option value="dark">ğŸŒ™ Dunkel (Standard)</option>
                                <option value="light">â˜€ï¸ Hell</option>
                                <option value="blue">ğŸ”µ Blau</option>
                                <option value="green">ğŸŸ¢ GrÃ¼n</option>
                                <option value="purple">ğŸŸ£ Lila</option>
                                <option value="orange">ğŸŸ  Orange</option>
                                <option value="custom">ğŸ¨ Benutzerdefiniert</option>
                            </select>
                        </div>
                        
                        <!-- Benutzerdefinierte Farben - VERSTECKT bis aktiviert -->
                        <div id="customColorsSection" style="display: none; grid-template-columns: 1fr 1fr; gap: 16px;">
                            <div>
                                <label>Hintergrundfarbe:</label>
                                <input type="color" id="customBackgroundColor" value="#111827" style="width: 100%; height: 50px; border: none; border-radius: 8px; cursor: pointer;">
                            </div>
                            <div>
                                <label>Textfarbe:</label>
                                <input type="color" id="customTextColor" value="#ffffff" style="width: 100%; height: 50px; border: none; border-radius: 8px; cursor: pointer;">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <h3>ğŸ”¤ SchriftgrÃ¶ÃŸe</h3>
                    <div style="display: grid; gap: 12px;">
                        <label>GrÃ¶ÃŸe:</label>
                        <select id="fontSelect" style="width: 100%; padding: 12px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary);">
                            <option value="small">ğŸ“ Klein</option>
                            <option value="normal">ğŸ“‹ Normal (Standard)</option>
                            <option value="large">ğŸ“– GroÃŸ</option>
                        </select>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <!-- Custom JS -->
    <script src="app.js"></script>
</body>
</html>
